{"version":3,"sources":["../source/format.test.js"],"names":["should","format","parameters","push","apply","describe","it","equal","options","formatExtension","number","extension","phone","country","ext","deep","thrower","undefined","throw"],"mappings":"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","file":"format.test.js","sourcesContent":["import chai, { expect } from 'chai'\r\nchai.should()\r\n\r\nimport metadata from '../metadata.min'\r\nimport formatter, { local_to_international_style } from '../source/format'\r\n\r\nfunction format(...parameters)\r\n{\r\n\tparameters.push(metadata)\r\n\treturn formatter.apply(this, parameters)\r\n}\r\n\r\ndescribe('format', () =>\r\n{\r\n\tit('should work with the first object argument expanded', function()\r\n\t{\r\n\t\tformat('+12133734253', 'National').should.equal('(213) 373-4253')\r\n\t\tformat('2133734253', 'US', 'International').should.equal('+1 213 373 4253')\r\n\t})\r\n\r\n\tit('should sort out the arguments', function()\r\n\t{\r\n\t\tconst options =\r\n\t\t{\r\n\t\t\tformatExtension: (number, extension) => `${number} доб. ${extension}`\r\n\t\t}\r\n\r\n\t\tformat\r\n\t\t({\r\n\t\t\tphone   : '8005553535',\r\n\t\t\tcountry : 'RU',\r\n\t\t\text     : '123'\r\n\t\t},\r\n\t\t'National', options).should.equal('800 555-35-35 доб. 123')\r\n\r\n\t\tformat('+78005553535', 'National', options).should.equal('800 555-35-35')\r\n\t\tformat('8005553535', 'RU', 'National', options).should.equal('800 555-35-35')\r\n\t})\r\n\r\n\tit('should format valid phone numbers', function()\r\n\t{\r\n\t\t// Switzerland\r\n\t\tformat({ country: 'CH', phone: '446681800' }, 'International').should.equal('+41 44 668 18 00')\r\n\t\tformat({ country: 'CH', phone: '446681800' }, 'E.164').should.equal('+41446681800')\r\n\t\t// \"International_plaintext\" is deprecated\r\n\t\tformat({ country: 'CH', phone: '446681800' }, 'International_plaintext').should.equal('+41446681800')\r\n\t\tformat({ country: 'CH', phone: '446681800' }, 'RFC3966').should.equal('+41446681800')\r\n\t\tformat({ country: 'CH', phone: '446681800' }, 'National').should.equal('044 668 18 00')\r\n\r\n\t\t// France\r\n\t\tformat({ country: 'FR', phone: '169454850' }, 'National').should.equal('01 69 45 48 50')\r\n\r\n\t\t// KZ\r\n\t\tformat('+7 702 211 1111', 'National').should.deep.equal('702 211 1111')\r\n\t})\r\n\r\n\tit('should work in edge cases', function()\r\n\t{\r\n\t\tlet thrower\r\n\r\n\t\t// Explicitly specified country and derived country conflict\r\n\t\tformat('+12133734253', 'RU', 'National').should.equal('+12133734253')\r\n\r\n\t\t// No suitable format\r\n\t\tformat('+121337342530', 'US', 'National').should.equal('21337342530')\r\n\t\t// No suitable format (leading digits mismatch)\r\n\t\tformat('699999', 'AD', 'National').should.equal('699999')\r\n\r\n\t\t// No national number\r\n\t\tformat(undefined, 'US', 'National').should.equal('')\r\n\t\tformat(undefined, 'US', 'International').should.equal('+1')\r\n\r\n\t\t// No metadata for country\r\n\t\tformat('+121337342530', 'USA', 'National').should.equal('21337342530')\r\n\t\tformat('21337342530', 'USA', 'National').should.equal('21337342530')\r\n\r\n\t\t// No format type\r\n\t\tthrower = () => format('+123')\r\n\t\tthrower.should.throw('Format type argument not passed')\r\n\r\n\t\t// Unknown format type\r\n\t\tthrower = () => format('123', 'US', 'Gay')\r\n\t\tthrower.should.throw('Unknown format type')\r\n\r\n\t\t// No metadata\r\n\t\tthrower = () => formatter('123', 'US', 'Gay')\r\n\t\tthrower.should.throw('Metadata')\r\n\r\n\t\t// No formats\r\n\t\tformat('012345', 'AC', 'National').should.equal('012345')\r\n\t})\r\n\r\n\tit('should convert local to international style format', function()\r\n\t{\r\n\t\tlocal_to_international_style('(xxx) xxx-xx-xx').should.equal('xxx xxx xx xx')\r\n\t\tlocal_to_international_style('(xxx)xxx').should.equal('xxx xxx')\r\n\t})\r\n\r\n\tit('should format phone number extensions', function()\r\n\t{\r\n\t\t// National\r\n\t\tformat\r\n\t\t({\r\n\t\t\tcountry: 'US',\r\n\t\t\tphone: '2133734253',\r\n\t\t\text: '123'\r\n\t\t},\r\n\t\t'National').should.equal('(213) 373-4253 ext. 123')\r\n\r\n\t\t// International\r\n\t\tformat\r\n\t\t({\r\n\t\t\tcountry : 'US',\r\n\t\t\tphone   : '2133734253',\r\n\t\t\text     : '123'\r\n\t\t},\r\n\t\t'International').should.equal('+1 213 373 4253 ext. 123')\r\n\r\n\t\t// International\r\n\t\tformat\r\n\t\t({\r\n\t\t\tcountry : 'US',\r\n\t\t\tphone   : '2133734253',\r\n\t\t\text     : '123'\r\n\t\t},\r\n\t\t'International').should.equal('+1 213 373 4253 ext. 123')\r\n\r\n\t\t// E.164\r\n\t\tformat\r\n\t\t({\r\n\t\t\tcountry : 'US',\r\n\t\t\tphone   : '2133734253',\r\n\t\t\text     : '123'\r\n\t\t},\r\n\t\t'E.164').should.equal('+12133734253')\r\n\r\n\t\t// RFC3966\r\n\t\tformat\r\n\t\t({\r\n\t\t\tcountry : 'US',\r\n\t\t\tphone   : '2133734253',\r\n\t\t\text     : '123'\r\n\t\t},\r\n\t\t'RFC3966').should.equal('+12133734253;ext=123')\r\n\t})\r\n})"]}