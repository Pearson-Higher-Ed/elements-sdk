{"version":3,"sources":["../source/FileUpload.js"],"names":["React","PureComponent","PropTypes","classNames","submitFormOnCtrlEnter","FileUpload","on_input_click","event","stopPropagation","on_input_change","on_file_selected","props","action","multiple","data","target","files","value","on_click","disabled","onClick","preventDefault","file_upload","click","onKeyDown","storeInputComponent","_","style","className","children","input_style","propTypes","func","isRequired","bool","node","string","object","display"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,QAAqC,OAArC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,UAAP,MAAuB,YAAvB;;AAEA,SAASC,qBAAT,QAAsC,eAAtC;;IAEqBC,U;;;;;;;;;;;;;;4LA0BpBC,c,GAAiB,UAACC,KAAD,EACjB;AACCA,SAAMC,eAAN;AACA,G,QAEDC,e,GAAkB,UAACF,KAAD,EAClB;AACC,SAAKG,gBAAL,CAAsBH,KAAtB;AACA,G,QAEDG,gB,GAAmB,UAACH,KAAD,EACnB;AAAA,qBAC8B,MAAKI,KADnC;AAAA,OACSC,MADT,eACSA,MADT;AAAA,OACiBC,QADjB,eACiBA,QADjB;;;AAGC,OAAIC,OAAOP,MAAMQ,MAAN,CAAaC,KAAxB;;AAEA,OAAI,CAACH,QAAL,EACA;AACCC,WAAOA,KAAK,CAAL,CAAP;AACA;;AAEDF,UAAOE,IAAP;;AAEA;AACA;AACA;AACAP,SAAMQ,MAAN,CAAaE,KAAb,GAAqB,IAArB;AACA,G,QAEDC,Q,GAAW,UAACX,KAAD,EACX;AAAA,sBAC+B,MAAKI,KADpC;AAAA,OACSQ,QADT,gBACSA,QADT;AAAA,OACmBC,OADnB,gBACmBA,OADnB;;;AAGC,OAAID,QAAJ,EACA;AACC,WAAOZ,MAAMc,cAAN,EAAP;AACA;;AAED,OAAID,OAAJ,EACA;AACCA;AACA;;AAED,SAAKE,WAAL,CAAiBC,KAAjB;AACA,G,QAIDC,S,GAAY,UAACjB,KAAD,EACZ;AAAA,OACSiB,SADT,GACuB,MAAKb,KAD5B,CACSa,SADT;;;AAGC,OAAIA,SAAJ,EACA;AACCA,cAAUjB,KAAV;AACA;;AAED,OAAIH,sBAAsBG,KAAtB,EAA6B,MAAKe,WAAlC,CAAJ,EACA;AACC;AACA;AACD,G,QAEDG,mB,GAAsB;AAAA,UAAK,MAAKH,WAAL,GAAmBI,CAAxB;AAAA,G;;;AAjBtB;AACA;;;;;2BAmBA;AAAA,gBAQG,KAAKf,KARR;AAAA,OAGEQ,QAHF,UAGEA,QAHF;AAAA,OAIEQ,KAJF,UAIEA,KAJF;AAAA,OAKEC,SALF,UAKEA,SALF;AAAA,OAMEC,QANF,UAMEA,QANF;;;AAUC,UACC;AAAA;AAAA;AACC,YAAQF,KADT;AAEC,gBAAYxB,WAAW,mBAAX,EAAgCyB,SAAhC,EACZ;AACC,qCAAgCT;AADjC,MADY,CAFb;AAMC,gBAAY,KAAKK,SANlB;AAOC,cAAU,KAAKN,QAPhB;AASC;AACC,WAAK,MADN;AAEC,UAAM,KAAKO,mBAFZ;AAGC,UAAI,YAHL;AAIC,YAAQK,WAJT;AAKC,cAAU,KAAKZ,QALhB;AAMC,eAAW,KAAKT,eANjB,GATD;AAiBGoB;AAjBH,IADD;AAqBA;;;;EA3HsC5B,a;;AAAnBI,U,CAEb0B,S,GACP;AACC;AACAnB,SAAYV,UAAU8B,IAAV,CAAeC,UAF5B;;AAIC;AACApB,WAAYX,UAAUgC,IALvB;;AAOC;AACAf,WAAYjB,UAAUgC,IARvB;;AAUC;AACAd,UAAYlB,UAAU8B,IAXvB;;AAaC;AACAH,WAAY3B,UAAUiC,IAdvB;;AAgBC;AACAP,YAAY1B,UAAUkC,MAjBvB;;AAmBC;AACAT,QAAYzB,UAAUmC;AApBvB,C;eAHoBhC,U;;;AA8HrB,IAAMyB,cACN;AACCQ,UAAS;AADV,CADA","file":"FileUpload.js","sourcesContent":["import React, { PureComponent } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport classNames from 'classnames'\r\n\r\nimport { submitFormOnCtrlEnter } from './utility/dom'\r\n\r\nexport default class FileUpload extends PureComponent\r\n{\r\n\tstatic propTypes =\r\n\t{\r\n\t\t// On file chosen handler\r\n\t\taction    : PropTypes.func.isRequired,\r\n\r\n\t\t// Allows choosing multiple files if `true`\r\n\t\tmultiple  : PropTypes.bool,\r\n\r\n\t\t// Disables the file input\r\n\t\tdisabled  : PropTypes.bool,\r\n\r\n\t\t// `onClick` handler\r\n\t\tonClick   : PropTypes.func,\r\n\r\n\t\t// The clickable area, like \"Click here to choose a file\"\r\n\t\tchildren  : PropTypes.node,\r\n\r\n\t\t// CSS class\r\n\t\tclassName : PropTypes.string,\r\n\r\n\t\t// CSS style object\r\n\t\tstyle     : PropTypes.object\r\n\t}\r\n\r\n\ton_input_click = (event) =>\r\n\t{\r\n\t\tevent.stopPropagation()\r\n\t}\r\n\r\n\ton_input_change = (event) =>\r\n\t{\r\n\t\tthis.on_file_selected(event)\r\n\t}\r\n\r\n\ton_file_selected = (event) =>\r\n\t{\r\n\t\tconst { action, multiple } = this.props\r\n\r\n\t\tlet data = event.target.files\r\n\r\n\t\tif (!multiple)\r\n\t\t{\r\n\t\t\tdata = data[0]\r\n\t\t}\r\n\r\n\t\taction(data)\r\n\r\n\t\t// reset the selected file\r\n\t\t// so that onChange would trigger again\r\n\t\t// even with the same file\r\n\t\tevent.target.value = null\r\n\t}\r\n\r\n\ton_click = (event) =>\r\n\t{\r\n\t\tconst { disabled, onClick } = this.props\r\n\r\n\t\tif (disabled)\r\n\t\t{\r\n\t\t\treturn event.preventDefault()\r\n\t\t}\r\n\r\n\t\tif (onClick)\r\n\t\t{\r\n\t\t\tonClick()\r\n\t\t}\r\n\r\n\t\tthis.file_upload.click()\r\n\t}\r\n\r\n\t// Not working for some reason.\r\n\t// (doesn't get called)\r\n\tonKeyDown = (event) =>\r\n\t{\r\n\t\tconst { onKeyDown } = this.props\r\n\r\n\t\tif (onKeyDown)\r\n\t\t{\r\n\t\t\tonKeyDown(event)\r\n\t\t}\r\n\r\n\t\tif (submitFormOnCtrlEnter(event, this.file_upload))\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\t}\r\n\r\n\tstoreInputComponent = _ => this.file_upload = _\r\n\r\n\trender()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tdisabled,\r\n\t\t\tstyle,\r\n\t\t\tclassName,\r\n\t\t\tchildren\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tstyle={ style }\r\n\t\t\t\tclassName={ classNames('rrui__file-upload', className,\r\n\t\t\t\t{\r\n\t\t\t\t\t'rrui__file-upload--disabled' : disabled\r\n\t\t\t\t}) }\r\n\t\t\t\tonKeyDown={ this.onKeyDown }\r\n\t\t\t\tonClick={ this.on_click }>\r\n\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\tref={ this.storeInputComponent }\r\n\t\t\t\t\tkey=\"file_input\"\r\n\t\t\t\t\tstyle={ input_style }\r\n\t\t\t\t\tonClick={ this.on_click }\r\n\t\t\t\t\tonChange={ this.on_input_change }/>\r\n\r\n\t\t\t\t{ children }\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nconst input_style =\r\n{\r\n\tdisplay: 'none'\r\n}"]}