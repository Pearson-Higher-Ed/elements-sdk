{"version":3,"sources":["../source/Button.js"],"names":["React","PureComponent","PropTypes","ReactDOM","classNames","ActivityIndicator","Button","state","link_on_click","bind","button_on_click","props","disabled","busy","wait","submit","title","stretch","style","className","render_button","link","linkDownload","buttonStyle","children","properties","ref","button","contents","findDOMNode","focus","event","action","shiftKey","altKey","ctrlKey","metaKey","preventDefault","result","then","setState","propTypes","func","bool","string","isRequired","object","defaultProps"],"mappings":"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","file":"Button.js","sourcesContent":["import React, { PureComponent } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport ReactDOM from 'react-dom'\r\nimport classNames from 'classnames'\r\n\r\nimport ActivityIndicator from './ActivityIndicator'\r\n\r\nexport default class Button extends PureComponent\r\n{\r\n\tstatic propTypes =\r\n\t{\r\n\t\t// onClick handler\r\n\t\taction          : PropTypes.func,\r\n\r\n\t\t// If `busy` is `true` then the button\r\n\t\t// will be disabled and a spinner will be shown.\r\n\t\tbusy            : PropTypes.bool,\r\n\r\n\t\t// `wait` is an alias for `busy`.\r\n\t\twait            : PropTypes.bool,\r\n\r\n\t\t// Disables the button\r\n\t\tdisabled        : PropTypes.bool,\r\n\r\n\t\t// When `true`, the button will submit an enclosing form.\r\n\t\tsubmit          : PropTypes.bool,\r\n\r\n\t\t// If `link` is set, then the button is gonna be an <a/> tag.\r\n\t\tlink            : PropTypes.string,\r\n\r\n\t\t// `<a download=\"...\"/>` HTML attribute\r\n\t\tlinkDownload    : PropTypes.string,\r\n\r\n\t\t// HTML `title` attribute\r\n\t\ttitle           : PropTypes.string,\r\n\r\n\t\t// Set to `true` to stretch the button to full width\r\n\t\tstretch         : PropTypes.bool.isRequired,\r\n\r\n\t\t// CSS class name\r\n\t\tclassName       : PropTypes.string,\r\n\r\n\t\t// CSS style object for the button container\r\n\t\tstyle           : PropTypes.object,\r\n\r\n\t\t// CSS style object for the button itself\r\n\t\tbuttonStyle     : PropTypes.object\r\n\t}\r\n\r\n\tstatic defaultProps =\r\n\t{\r\n\t\t// Set to `true` to stretch the button to full width\r\n\t\tstretch : false\r\n\t}\r\n\r\n\tstate = {}\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tsuper()\r\n\r\n\t\tthis.link_on_click   = this.link_on_click.bind(this)\r\n\t\tthis.button_on_click = this.button_on_click.bind(this)\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tdisabled,\r\n\t\t\tbusy,\r\n\t\t\twait,\r\n\t\t\tsubmit,\r\n\t\t\ttitle,\r\n\t\t\tstretch,\r\n\t\t\tstyle,\r\n\t\t\tclassName\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tclassName={ classNames('rrui__input', 'rrui__button',\r\n\t\t\t\t{\r\n\t\t\t\t\t'rrui__button--busy'     : busy || wait || this.state.wait,\r\n\t\t\t\t\t'rrui__button--disabled' : disabled,\r\n\t\t\t\t\t'rrui__button--stretch'  : stretch\r\n\t\t\t\t},\r\n\t\t\t\tclassName) }\r\n\t\t\t\tstyle={ style }>\r\n\r\n\t\t\t\t<ActivityIndicator\r\n\t\t\t\t\tclassName={ classNames('rrui__button__activity-indicator',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// CSS selector performance optimization\r\n\t\t\t\t\t\t'rrui__button__activity-indicator--busy' : busy || wait || this.state.wait\r\n\t\t\t\t\t}) }/>\r\n\r\n\t\t\t\t{ this.render_button() }\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\trender_button()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tlink,\r\n\t\t\tlinkDownload,\r\n\t\t\ttitle,\r\n\t\t\tbusy,\r\n\t\t\twait,\r\n\t\t\tdisabled,\r\n\t\t\tsubmit,\r\n\t\t\tbuttonStyle,\r\n\t\t\tchildren\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\tconst className = classNames('rrui__button-reset', 'rrui__button__button',\r\n\t\t{\r\n\t\t\t'rrui__button__button--link'     : link,\r\n\t\t\t// CSS selector performance optimization\r\n\t\t\t'rrui__button__button--busy'     : busy || wait || this.state.wait,\r\n\t\t\t'rrui__button__button--disabled' : disabled\r\n\t\t})\r\n\r\n\t\tconst properties =\r\n\t\t{\r\n\t\t\tref: ref => this.button = ref,\r\n\t\t\ttitle,\r\n\t\t\tclassName,\r\n\t\t\tstyle: buttonStyle\r\n\t\t}\r\n\r\n\t\tconst contents = <div\r\n\t\t\tclassName={ classNames('rrui__button__contents',\r\n\t\t\t{\r\n\t\t\t\t// CSS selector performance optimization\r\n\t\t\t\t'rrui__button__contents--busy' : busy || wait || this.state.wait\r\n\t\t\t}) }>\r\n\t\t\t{ children }\r\n\t\t</div>\r\n\r\n\t\tif (link)\r\n\t\t{\r\n\t\t\treturn (\r\n\t\t\t\t<a\r\n\t\t\t\t\thref={ link }\r\n\t\t\t\t\tdownload={ linkDownload }\r\n\t\t\t\t\tonClick={ this.link_on_click }\r\n\t\t\t\t\t{ ...properties }>\r\n\r\n\t\t\t\t\t{ contents }\r\n\t\t\t\t</a>\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<button\r\n\t\t\t\ttype={ submit ? 'submit' : 'button' }\r\n\t\t\t\tdisabled={ busy || wait || this.state.wait || disabled }\r\n\t\t\t\tonClick={ this.button_on_click }\r\n\t\t\t\t{ ...properties }>\r\n\r\n\t\t\t\t{ contents }\r\n\t\t\t</button>\r\n\t\t)\r\n\t}\r\n\r\n\tfocus()\r\n\t{\r\n\t\tReactDOM.findDOMNode(this.button).focus()\r\n\t}\r\n\r\n\tlink_on_click(event)\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tbusy,\r\n\t\t\twait,\r\n\t\t\tdisabled,\r\n\t\t\taction\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\t// Only handle left mouse button clicks\r\n\t\t// ignoring those ones with a modifier key pressed\r\n\t\tif (event.button !== 0\r\n\t\t\t|| event.shiftKey\r\n\t\t\t|| event.altKey\r\n\t\t\t|| event.ctrlKey\r\n\t\t\t|| event.metaKey)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (busy || wait || this.state.wait || disabled)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// Could be just a \"submit\" button without having any `action`.\r\n\t\t// Could also be just a `link` button.\r\n\t\t// Therefore \"preventing default\" only if `action` is set:\r\n\t\t// for example, if `link` is set and no `action`\r\n\t\t// then it should proceed with navigating to the `link`.\r\n\t\t// And if `link` is set and `action` is specified too\r\n\t\t// then it will prevent it from navigating to the `link`.\r\n\t\tif (action)\r\n\t\t{\r\n\t\t\tevent.preventDefault()\r\n\t\t\taction()\r\n\t\t}\r\n\t}\r\n\r\n\tbutton_on_click(event)\r\n\t{\r\n\t\tconst { action } = this.props\r\n\r\n\t\t// Could be just a \"submit\" button\r\n\t\tif (action)\r\n\t\t{\r\n\t\t\tconst result = action()\r\n\r\n\t\t\tif (result && typeof result.then === 'function')\r\n\t\t\t{\r\n\t\t\t\tthis.setState({ wait: true })\r\n\t\t\t\tresult.then(() => this.setState({ wait: false }), () => this.setState({ wait: false }))\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}"]}