{"version":3,"sources":["../source/Tooltip.js"],"names":["React","PureComponent","PropTypes","ReactDOM","classNames","Tooltip","show","animate","hide_timeout","clearTimeout","undefined","tooltip","classList","remove","create_tooltip","calculate_coordinates","x","y","style","left","top","add","hide","hidingAnimationDuration","props","setTimeout","destroy_tooltip","on_mouse_enter","text","content","mobile","show_timeout","delay","on_mouse_leave","on_touch_start","textContent","tooltipClassName","document","createElement","position","container","appendChild","parentNode","removeChild","width","offsetWidth","height","offsetHeight","origin","findDOMNode","origin_width","_offset","offset","reposition_within_screen","inline","className","children","rest","ref","inline_style","propTypes","string","bool","isRequired","number","func","object","defaultProps","body","minimal_margin","window","innerWidth","pageYOffset","innerHeight","element","rect","getBoundingClientRect","client_left","clientLeft","client_top","clientTop","pageXOffset","display"],"mappings":"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","file":"Tooltip.js","sourcesContent":["import React, { PureComponent } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport ReactDOM from 'react-dom'\r\nimport classNames from 'classnames'\r\n\r\n// https://github.com/Dogfalo/materialize/blob/master/js/tooltip.js\r\nexport default class Tooltip extends PureComponent\r\n{\r\n\tstatic propTypes =\r\n\t{\r\n\t\t// Tooltip text\r\n\t\ttext : PropTypes.string,\r\n\t\tcontent : PropTypes.string,\r\n\r\n\t\t// Whether this element should be displayed as `inline-block`.\r\n\t\t// (is `true` by default)\r\n\t\tinline : PropTypes.bool.isRequired,\r\n\r\n\t\t// The delay before the tooltip is shown (in milliseconds)\r\n\t\tdelay : PropTypes.number.isRequired,\r\n\r\n\t\t// The duration of the tooltip hiding animation.\r\n\t\t// The DOM element will retain `display: block` for this time period.\r\n\t\t// When changing this timeout also change `transition` time for\r\n\t\t// `.tooltip--after-show` and `.tooltip--before-hide` CSS classes.\r\n\t\t// Is `120` by default.\r\n\t\thidingAnimationDuration : PropTypes.number.isRequired,\r\n\r\n\t\t// `container: () => DOMElement` property is optional\r\n\t\t// and is gonna be the parent DOM Element for the tooltip itself\r\n\t\t// (`document.body` by default).\r\n\t\t// (in which case make sure that `document.body` has no `margin`\r\n\t\t//  otherwise tooltip `left` and `top` positions will be slightly off).\r\n\t\tcontainer : PropTypes.func,\r\n\r\n\t\t// CSS style object\r\n\t\tstyle : PropTypes.object,\r\n\r\n\t\t// CSS class name\r\n\t\tclassName : PropTypes.string,\r\n\r\n\t\t// Tooltip CSS class name\r\n\t\ttooltipClassName : PropTypes.string\r\n\t}\r\n\r\n\tstatic defaultProps =\r\n\t{\r\n\t\tinline : true,\r\n\t\tdelay : 200, // in milliseconds\r\n\t\thidingAnimationDuration : 120, // in milliseconds\r\n\t\tcontainer : () => document.body\r\n\t}\r\n\r\n\tcomponentWillReceiveProps({ text, content })\r\n\t{\r\n\t\t// Update tooltip text\r\n\t\tif (this.tooltip && (text !== this.props.text || content !== this.props.content))\r\n\t\t{\r\n\t\t\tthis.tooltip.textContent = text || content\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount()\r\n\t{\r\n\t\tclearTimeout(this.show_timeout)\r\n\t\tclearTimeout(this.hide_timeout)\r\n\r\n\t\tthis.show_timeout = undefined\r\n\t\tthis.hide_timeout = undefined\r\n\r\n\t\tthis.destroy_tooltip()\r\n\t}\r\n\r\n\tcreate_tooltip()\r\n\t{\r\n\t\tconst { text, content, tooltipClassName } = this.props\r\n\r\n\t\tthis.tooltip = document.createElement('div')\r\n\r\n\t\t// this.tooltip.style.display  = 'none'\r\n\t\tthis.tooltip.style.position = 'absolute'\r\n\t\tthis.tooltip.style.left = 0\r\n\t\tthis.tooltip.style.top  = 0\r\n\r\n\t\tthis.tooltip.classList.add('rrui__tooltip')\r\n\r\n\t\tif (tooltipClassName)\r\n\t\t{\r\n\t\t\tthis.tooltip.classList.add(tooltipClassName)\r\n\t\t}\r\n\r\n\t\tthis.tooltip.textContent = text || content\r\n\r\n\t\tthis.container().appendChild(this.tooltip)\r\n\t}\r\n\r\n\tdestroy_tooltip()\r\n\t{\r\n\t\tif (this.tooltip)\r\n\t\t{\r\n\t\t\t// Won't throw an exception\r\n\t\t\tthis.tooltip.parentNode.removeChild(this.tooltip)\r\n\t\t\tthis.tooltip = undefined\r\n\t\t}\r\n\t}\r\n\r\n\tcontainer()\r\n\t{\r\n\t\tconst { container } = this.props\r\n\t\treturn container()\r\n\t}\r\n\r\n\tcalculate_coordinates()\r\n\t{\r\n\t\tconst width  = this.tooltip.offsetWidth\r\n\t\tconst height = this.tooltip.offsetHeight\r\n\r\n\t\tconst origin = ReactDOM.findDOMNode(this.origin)\r\n\r\n\t\tconst origin_width  = origin.offsetWidth\r\n\t\t// const origin_height = origin.offsetHeight\r\n\r\n\t\tconst _offset = offset(origin)\r\n\r\n\t\tconst top  = _offset.top - height - offset(this.container()).top\r\n\t\tconst left = _offset.left + origin_width / 2 - width / 2\r\n\r\n\t\treturn reposition_within_screen(left, top, width, height)\r\n\t}\r\n\r\n\tshow = () =>\r\n\t{\r\n\t\t// Play tooltip showing animation\r\n\t\tlet animate = false\r\n\r\n\t\t// If hiding animation is being played,\r\n\t\t// then cancel it, and cancel setting\r\n\t\t// `display` to `none` after it finishes playing.\r\n\t\tif (this.hide_timeout)\r\n\t\t{\r\n\t\t\tclearTimeout(this.hide_timeout)\r\n\t\t\tthis.hide_timeout = undefined\r\n\r\n\t\t\t// Abort tooltip hiding animation.\r\n\t\t\t// It will automatically return to the \"showing\" state.\r\n\t\t\tthis.tooltip.classList.remove('rrui__tooltip--before-hide')\r\n\t\t}\r\n\t\t// Otherwise, the tooltip is hidden (or never been shown)\r\n\t\telse\r\n\t\t{\r\n\t\t\tif (!this.tooltip)\r\n\t\t\t{\r\n\t\t\t\tthis.create_tooltip()\r\n\t\t\t}\r\n\r\n\t\t\t// this.tooltip.style.display = 'block'\r\n\r\n\t\t\t// Play tooltip showing animation\r\n\t\t\tanimate = true\r\n\t\t}\r\n\r\n\t\tconst { x, y } = this.calculate_coordinates()\r\n\r\n\t\tthis.tooltip.style.left = `${x}px`\r\n\t\tthis.tooltip.style.top  = `${y}px`\r\n\r\n\t\t// Play tooltip showing animation\r\n\t\t// (doing it after setting position because\r\n\t\t//  setting position applies `display: block`)\r\n\t\tif (animate)\r\n\t\t{\r\n\t\t\tthis.tooltip.classList.add('rrui__tooltip--after-show')\r\n\t\t}\r\n\t}\r\n\r\n\thide = () =>\r\n\t{\r\n\t\tconst { hidingAnimationDuration } = this.props\r\n\r\n\t\t// If already hiding, or if already hidden, then do nothing.\r\n\t\t// if (this.hide_timeout || this.tooltip.style.display === 'none')\r\n\t\tif (this.hide_timeout || !this.tooltip)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// Play tooltip hiding animation\r\n\t\tthis.tooltip.classList.add('rrui__tooltip--before-hide')\r\n\r\n\t\t// Set the tooltip to `display: none`\r\n\t\t// after its hiding animation finishes.\r\n\t\tthis.hide_timeout = setTimeout(() =>\r\n\t\t{\r\n\t\t\tthis.hide_timeout = undefined\r\n\t\t\tthis.destroy_tooltip()\r\n\t\t\t// this.tooltip.style.display = 'none'\r\n\t\t\t// this.tooltip.classList.remove('rrui__tooltip--before-hide')\r\n\t\t\t// this.tooltip.classList.remove('rrui__tooltip--after-show')\r\n\t\t},\r\n\t\thidingAnimationDuration)\r\n\t}\r\n\r\n\ton_mouse_enter = () =>\r\n\t{\r\n\t\tconst { text, content } = this.props\r\n\r\n\t\t// mouse enter and mouse leave events\r\n\t\t// are triggered on mobile devices too\r\n\t\tif (this.mobile)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// If the tooltip has no text then don't show it.\r\n\t\tif (!text && !content)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// Shouldn't happen, because\r\n\t\t// `mouse leave` event clears this timeout.\r\n\t\tif (this.show_timeout)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst { delay } = this.props\r\n\r\n\t\t// Don't show the tooltip immediately\r\n\t\t// but rather wait for the user to\r\n\t\t// \"mouse over\" it for a short time interval.\r\n\t\t// (prevents false positives)\r\n\t\tthis.show_timeout = setTimeout(() =>\r\n\t\t{\r\n\t\t\tthis.show_timeout = undefined\r\n\t\t\tthis.show()\r\n\t\t},\r\n\t\tdelay)\r\n\t}\r\n\r\n\ton_mouse_leave = () =>\r\n\t{\r\n\t\t// mouse enter and mouse leave events\r\n\t\t// are triggered on mobile devices too\r\n\t\tif (this.mobile)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// If tooltip hasn't been shown yet,\r\n\t\t// then cancel showing it.\r\n\t\tif (this.show_timeout)\r\n\t\t{\r\n\t\t\tclearTimeout(this.show_timeout)\r\n\t\t\tthis.show_timeout = undefined\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// Otherwise, the tooltip is shown, so hide it.\r\n\t\tthis.hide()\r\n\t}\r\n\r\n\ton_touch_start = () =>\r\n\t{\r\n\t\tconst { text, content } = this.props\r\n\r\n\t\t// mouse enter events won't be processed from now on\r\n\t\tthis.mobile = true\r\n\r\n\t\t// If the tooltip has no text then don't show it.\r\n\t\tif (!text && !content)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tthis.show()\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\t// Shows tooltip on mouse over when on desktop.\r\n\t\t// Shows tooltip on touch when on mobile.\r\n\r\n\t\tconst\r\n\t\t{\r\n\t\t\tinline,\r\n\t\t\tstyle,\r\n\t\t\tclassName,\r\n\t\t\tchildren,\r\n\r\n\t\t\t// These properties are here just for `...rest`\r\n\t\t\ttext,\r\n\t\t\tcontent,\r\n\t\t\tdelay,\r\n\t\t\thidingAnimationDuration,\r\n\t\t\tcontainer,\r\n\t\t\ttooltipClassName,\r\n\r\n\t\t\t// Pass through all other properties\r\n\t\t\t...rest\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\t{...rest}\r\n\t\t\t\tref={ ref => this.origin = ref }\r\n\t\t\t\tonMouseEnter={ this.on_mouse_enter }\r\n\t\t\t\tonMouseLeave={ this.on_mouse_leave }\r\n\t\t\t\tonTouchStart={ this.on_touch_start }\r\n\t\t\t\tonTouchMove={ this.hide }\r\n\t\t\t\tonTouchEnd={ this.hide }\r\n\t\t\t\tonTouchCancel={ this.hide }\r\n\t\t\t\tstyle={ inline ? (style ? { ...inline_style, ...style } : inline_style) : style }\r\n\t\t\t\tclassName={ classNames('rrui__tooltip__target', className) }>\r\n\t\t\t\t{ children }\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nfunction reposition_within_screen(x, y, width, height)\r\n{\r\n\tconst minimal_margin = 4 // in pixels\r\n\r\n\tif (x < minimal_margin)\r\n\t{\r\n\t\tx = minimal_margin\r\n\t}\r\n\telse if (x + width + minimal_margin > window.innerWidth)\r\n\t{\r\n\t\tx -= (x + width + minimal_margin) - window.innerWidth\r\n\t}\r\n\r\n\tif (y < window.pageYOffset + minimal_margin)\r\n\t{\r\n\t\ty = window.pageYOffset + minimal_margin\r\n\t}\r\n\telse if (y + height + minimal_margin > window.pageYOffset + window.innerHeight)\r\n\t{\r\n\t\ty -= (y + height + minimal_margin) - (window.pageYOffset + window.innerHeight)\r\n\t}\r\n\r\n\treturn { x, y }\r\n}\r\n\r\n// http://stackoverflow.com/questions/5598743/finding-elements-position-relative-to-the-document\r\nfunction offset(element)\r\n{\r\n\tconst rect = element.getBoundingClientRect()\r\n\r\n\tconst client_left = document.clientLeft || document.body.clientLeft || 0\r\n\tconst client_top  = document.clientTop || document.body.clientTop || 0\r\n\r\n\tconst top  = rect.top + window.pageYOffset - client_top\r\n\tconst left = rect.left + window.pageXOffset - client_left\r\n\r\n\treturn { top, left }\r\n}\r\n\r\nconst inline_style =\r\n{\r\n\tdisplay : 'inline-block'\r\n}\r\n"]}